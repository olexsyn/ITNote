# ModRewrite

## Избавиться от дублей страниц из-за слеша

Поисковые системы при индексации сайта могут воспринимать ссылки со слешем (косая черта — `/`) и без него как разные страницы. А еще бывает, что при обращении к таким ссылкам открывается разное содержимое (например, example.com/shop/ — работает, а example.com/shop — отдает код 404). Чтобы устранить эти дубли страниц, примените к сайту эти правила перенаправления 301.

Добавить слеш ко всем страницам сайта можно при помощи правила:

```apache
RewriteEngine on
RewriteCond %{REQUEST_URI} !/$
RewriteCond %{REQUEST_URI} !\.
RewriteRule ^(.*) %{REQUEST_URI}/ [R=301,L]
```
Это правило автоматически перенаправит поискового робота и посетителя, например, со страницы _example.com/shop_ на _example.com/shop/_.

Чтобы наоборот убрать слеш в конце ссылок на страницы сайта, внесите в файл .htaccess следующие директивы:

```apache
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} /$ [NC]
RewriteRule ^(.*)(/)$ $1 [L,R=301]
```

В эти правила можно добавить исключение для конкретной директории, чтобы на нее правило перенаправления не действовало — например, если это обусловлено особенностями CMS сайта:

```apache
RewriteCond %{REQUEST_URI} !admin/$
```

Добавьте эту строку в середину правила (под остальными RewriteCond) и измените имя директории из примера.
